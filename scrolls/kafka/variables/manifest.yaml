image: bitnami/kafka:3.5.1
profiles:
  - env
ports:
  - host: 9092
    container: 9092
  - host: 29092
    container: 29092
environment:
  KAFKA_ENABLE_KRAFT: "yes"
  KAFKA_CFG_NODE_ID: 1
  KAFKA_CFG_PROCESS_ROLES: "broker,controller"
  KAFKA_CFG_CONTROLLER_LISTENER_NAMES: "CONTROLLER"
  KAFKA_CFG_LISTENERS: "CLIENT://:29092,CLIENT_LOCAL://:9092,CONTROLLER://:9093"
  KAFKA_CFG_LISTENER_SECURITY_PROTOCOL_MAP: "CLIENT:PLAINTEXT,CLIENT_LOCAL:PLAINTEXT,CONTROLLER:PLAINTEXT"
  KAFKA_CFG_ADVERTISED_LISTENERS: "CLIENT://ggcode_kafka:29092,CLIENT_LOCAL://localhost:9092"
  KAFKA_INTER_BROKER_LISTENER_NAME: "CLIENT_LOCAL"
  KAFKA_CFG_BROKER_ID: 1
  KAFKA_CFG_CONTROLLER_QUORUM_VOTERS: "1@ggcode_kafka:9093"
  ALLOW_PLAINTEXT_LISTENER: "yes"
  KAFKA_KRAFT_CLUSTER_ID: "NTdhMjIzMzMyYmFlNGUxMD"
networks:
  ggcode:
